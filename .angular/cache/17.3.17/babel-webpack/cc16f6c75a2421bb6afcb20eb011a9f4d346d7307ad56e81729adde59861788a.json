{"ast":null,"code":"import { FormBuilder, FormGroup, FormArray, Validators, ReactiveFormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\nimport { MatNativeDateModule } from '@angular/material/core';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { ContractsApiService } from '../../shared/services/api.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../shared/services/api.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/dialog\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/material/select\";\nimport * as i9 from \"@angular/material/core\";\nimport * as i10 from \"@angular/material/button\";\nimport * as i11 from \"@angular/material/icon\";\nimport * as i12 from \"@angular/material/card\";\nimport * as i13 from \"@angular/material/datepicker\";\nimport * as i14 from \"@angular/material/tooltip\";\nimport * as i15 from \"@angular/material/chips\";\nfunction ContractFormComponent_mat_option_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 42);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const status_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", status_r2.value);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", status_r2.label, \" \");\n  }\n}\nfunction ContractFormComponent_mat_card_98_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 43)(1, \"mat-card-content\")(2, \"div\", 44)(3, \"mat-icon\");\n    i0.ɵɵtext(4, \"warning\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\")(6, \"strong\");\n    i0.ɵɵtext(7, \"Diverg\\u00EAncia de Valores\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"currency\");\n    i0.ɵɵpipe(11, \"currency\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    let tmp_3_0;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate2(\" Valor do contrato: \", i0.ɵɵpipeBind4(10, 2, (tmp_3_0 = ctx_r2.contractForm.get(\"valor\")) == null ? null : tmp_3_0.value, \"BRL\", \"symbol\", \"1.2-2\"), \" | Total das POs: \", i0.ɵɵpipeBind4(11, 7, ctx_r2.getTotalPOValue(), \"BRL\", \"symbol\", \"1.2-2\"), \" \");\n  }\n}\nfunction ContractFormComponent_div_100_mat_option_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 42);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const method_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", method_r6.value);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", method_r6.label, \" \");\n  }\n}\nfunction ContractFormComponent_div_100_div_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"mat-form-field\", 12)(2, \"mat-label\");\n    i0.ɵɵtext(3, \"Progresso (%)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 53);\n    i0.ɵɵelementStart(5, \"span\", 54);\n    i0.ɵɵtext(6, \"%\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"mat-error\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 55);\n    i0.ɵɵelement(10, \"mat-progress-bar\", 56);\n    i0.ɵɵelementStart(11, \"span\", 57);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    let tmp_9_0;\n    let tmp_10_0;\n    const po_r7 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(ctx_r2.getErrorMessage(\"progresso\", po_r7));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", ((tmp_9_0 = po_r7.get(\"progresso\")) == null ? null : tmp_9_0.value) || 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ((tmp_10_0 = po_r7.get(\"progresso\")) == null ? null : tmp_10_0.value) || 0, \"% conclu\\u00EDdo \");\n  }\n}\nfunction ContractFormComponent_div_100_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 45)(1, \"div\", 46)(2, \"h4\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 47);\n    i0.ɵɵlistener(\"click\", function ContractFormComponent_div_100_Template_button_click_4_listener() {\n      const i_r5 = i0.ɵɵrestoreView(_r4).index;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.removePerformanceObligation(i_r5));\n    });\n    i0.ɵɵelementStart(5, \"mat-icon\");\n    i0.ɵɵtext(6, \"delete\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"div\", 48)(8, \"div\", 11)(9, \"mat-form-field\", 17)(10, \"mat-label\");\n    i0.ɵɵtext(11, \"Descri\\u00E7\\u00E3o da Obriga\\u00E7\\u00E3o\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 49);\n    i0.ɵɵelementStart(13, \"mat-error\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"div\", 11)(16, \"mat-form-field\", 12)(17, \"mat-label\");\n    i0.ɵɵtext(18, \"Valor Alocado\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(19, \"input\", 24);\n    i0.ɵɵelementStart(20, \"span\", 25);\n    i0.ɵɵtext(21, \"R$ \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"mat-error\");\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"mat-form-field\", 12)(25, \"mat-label\");\n    i0.ɵɵtext(26, \"M\\u00E9todo de Reconhecimento\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"mat-select\", 50);\n    i0.ɵɵtemplate(28, ContractFormComponent_div_100_mat_option_28_Template, 2, 2, \"mat-option\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"mat-icon\", 51);\n    i0.ɵɵtext(30, \"help\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"mat-error\");\n    i0.ɵɵtext(32);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(33, \"div\", 11)(34, \"mat-form-field\", 12)(35, \"mat-label\");\n    i0.ɵɵtext(36, \"Data de In\\u00EDcio\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(37, \"input\", 21)(38, \"mat-datepicker-toggle\", 22)(39, \"mat-datepicker\", null, 2);\n    i0.ɵɵelementStart(41, \"mat-error\");\n    i0.ɵɵtext(42);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(43, \"mat-form-field\", 12)(44, \"mat-label\");\n    i0.ɵɵtext(45, \"Data de Fim\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(46, \"input\", 23)(47, \"mat-datepicker-toggle\", 22)(48, \"mat-datepicker\", null, 3);\n    i0.ɵɵelementStart(50, \"mat-error\");\n    i0.ɵɵtext(51);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(52, ContractFormComponent_div_100_div_52_Template, 13, 3, \"div\", 52);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const po_r7 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    const poStartPicker_r8 = i0.ɵɵreference(40);\n    const poEndPicker_r9 = i0.ɵɵreference(49);\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroupName\", i_r5);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Performance Obligation \", i_r5 + 1, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r2.performanceObligations.length <= 1);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(ctx_r2.getErrorMessage(\"descricao\", po_r7));\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(ctx_r2.getErrorMessage(\"valor\", po_r7));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.reconhecimentoMethods);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.getErrorMessage(\"metodoReconhecimento\", po_r7));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"matDatepicker\", poStartPicker_r8);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"for\", poStartPicker_r8);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.getErrorMessage(\"dataInicio\", po_r7));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"matDatepicker\", poEndPicker_r9);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"for\", poEndPicker_r9);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.getErrorMessage(\"dataFim\", po_r7));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isEditMode);\n  }\n}\nfunction ContractFormComponent_mat_icon_119_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\");\n    i0.ɵɵtext(1, \"hourglass_empty\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ContractFormComponent_mat_icon_120_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r2.isEditMode ? \"save\" : \"add\");\n  }\n}\nexport let ContractFormComponent = /*#__PURE__*/(() => {\n  class ContractFormComponent {\n    constructor(fb, contractsApi, router, route) {\n      this.fb = fb;\n      this.contractsApi = contractsApi;\n      this.router = router;\n      this.route = route;\n      this.loading = false;\n      this.isEditMode = false;\n      this.reconhecimentoMethods = [{\n        value: 'point_in_time',\n        label: 'Ponto no Tempo'\n      }, {\n        value: 'over_time_output',\n        label: 'Ao Longo do Tempo - Output'\n      }, {\n        value: 'over_time_input',\n        label: 'Ao Longo do Tempo - Input'\n      }, {\n        value: 'over_time_time_elapsed',\n        label: 'Ao Longo do Tempo - Tempo Decorrido'\n      }];\n      this.statusOptions = [{\n        value: 'draft',\n        label: 'Rascunho'\n      }, {\n        value: 'active',\n        label: 'Ativo'\n      }, {\n        value: 'completed',\n        label: 'Concluído'\n      }, {\n        value: 'cancelled',\n        label: 'Cancelado'\n      }];\n      this.isEditMode = this.route.snapshot.url.some(segment => segment.path === 'edit');\n    }\n    ngOnInit() {\n      this.initializeForm();\n      const contractId = this.route.snapshot.paramMap.get('id');\n      if (this.isEditMode && contractId) {\n        this.loadContractById(contractId);\n      }\n    }\n    initializeForm() {\n      this.contractForm = this.fb.group({\n        numero: ['', [Validators.required, Validators.minLength(3)]],\n        cliente: ['', [Validators.required, Validators.minLength(2)]],\n        descricao: ['', Validators.required],\n        dataInicio: ['', Validators.required],\n        dataFim: ['', Validators.required],\n        valor: ['', [Validators.required, Validators.min(0.01)]],\n        status: ['draft', Validators.required],\n        moeda: ['BRL', Validators.required],\n        observacoes: [''],\n        performanceObligations: this.fb.array([])\n      });\n      // Add initial PO\n      this.addPerformanceObligation();\n    }\n    get performanceObligations() {\n      return this.contractForm.get('performanceObligations');\n    }\n    createPerformanceObligationForm(po) {\n      return this.fb.group({\n        id: [po?.id || ''],\n        descricao: [po?.descricao || '', [Validators.required, Validators.minLength(3)]],\n        valor: [po?.valor || '', [Validators.required, Validators.min(0.01)]],\n        metodoReconhecimento: [po?.metodoReconhecimento || 'over_time_output', Validators.required],\n        dataInicio: [po?.dataInicio || '', Validators.required],\n        dataFim: [po?.dataFim || '', Validators.required],\n        progresso: [po?.progresso || 0, [Validators.min(0), Validators.max(100)]]\n      });\n    }\n    addPerformanceObligation() {\n      this.performanceObligations.push(this.createPerformanceObligationForm());\n    }\n    removePerformanceObligation(index) {\n      if (this.performanceObligations.length > 1) {\n        this.performanceObligations.removeAt(index);\n      }\n    }\n    loadContractById(contractId) {\n      // Simulate loading contract data by ID\n      // In a real app, this would call the API service\n      const mockContract = {\n        numero: 'CTR-2024-001',\n        cliente: 'Empresa ABC Ltda',\n        descricao: 'Contrato de prestação de serviços',\n        dataInicio: new Date('2024-01-01'),\n        dataFim: new Date('2024-12-31'),\n        valor: 50000,\n        status: 'active',\n        moeda: 'BRL',\n        observacoes: 'Contrato de exemplo'\n      };\n      this.contractForm.patchValue({\n        numero: mockContract.numero,\n        cliente: mockContract.cliente,\n        descricao: mockContract.descricao,\n        dataInicio: mockContract.dataInicio,\n        dataFim: mockContract.dataFim,\n        valor: mockContract.valor,\n        status: mockContract.status,\n        moeda: mockContract.moeda,\n        observacoes: mockContract.observacoes\n      });\n      // Clear existing POs and add default one\n      this.performanceObligations.clear();\n      this.addPerformanceObligation();\n    }\n    onSubmit() {\n      if (this.contractForm.valid) {\n        this.loading = true;\n        const formData = this.contractForm.value;\n        const contractId = this.route.snapshot.paramMap.get('id');\n        const apiCall = this.isEditMode && contractId ? this.contractsApi.updateContract(contractId, formData) : this.contractsApi.createContract(formData);\n        apiCall.subscribe({\n          next: result => {\n            console.log(this.isEditMode ? 'Contrato atualizado com sucesso!' : 'Contrato criado com sucesso!');\n            this.goBack();\n          },\n          error: error => {\n            console.error(`Erro ao ${this.isEditMode ? 'atualizar' : 'criar'} contrato:`, error.message);\n            this.loading = false;\n          }\n        });\n      } else {\n        this.markFormGroupTouched(this.contractForm);\n      }\n    }\n    onCancel() {\n      this.goBack();\n    }\n    markFormGroupTouched(formGroup) {\n      Object.keys(formGroup.controls).forEach(key => {\n        const control = formGroup.get(key);\n        control?.markAsTouched();\n        if (control instanceof FormGroup) {\n          this.markFormGroupTouched(control);\n        } else if (control instanceof FormArray) {\n          control.controls.forEach(arrayControl => {\n            if (arrayControl instanceof FormGroup) {\n              this.markFormGroupTouched(arrayControl);\n            }\n          });\n        }\n      });\n    }\n    getErrorMessage(fieldName, formGroup) {\n      const control = (formGroup || this.contractForm).get(fieldName);\n      if (control?.hasError('required')) {\n        return 'Este campo é obrigatório';\n      }\n      if (control?.hasError('minlength')) {\n        return `Mínimo de ${control.errors?.['minlength'].requiredLength} caracteres`;\n      }\n      if (control?.hasError('min')) {\n        return `Valor deve ser maior que ${control.errors?.['min'].min}`;\n      }\n      if (control?.hasError('max')) {\n        return `Valor deve ser menor que ${control.errors?.['max'].max}`;\n      }\n      return '';\n    }\n    getTotalPOValue() {\n      return this.performanceObligations.controls.reduce((total, control) => {\n        const valor = control.get('valor')?.value || 0;\n        return total + Number(valor);\n      }, 0);\n    }\n    isValueMismatch() {\n      const contractValue = this.contractForm.get('valor')?.value || 0;\n      const totalPOValue = this.getTotalPOValue();\n      return Math.abs(contractValue - totalPOValue) > 0.01;\n    }\n    goBack() {\n      this.router.navigate(['/contracts']);\n    }\n    static {\n      this.ɵfac = function ContractFormComponent_Factory(t) {\n        return new (t || ContractFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ContractsApiService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ContractFormComponent,\n        selectors: [[\"app-contract-form\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 122,\n        vars: 25,\n        consts: [[\"startPicker\", \"\"], [\"endPicker\", \"\"], [\"poStartPicker\", \"\"], [\"poEndPicker\", \"\"], [1, \"contract-form-container\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-header\"], [\"mat-dialog-title\", \"\"], [1, \"form-subtitle\"], [1, \"form-content\"], [1, \"form-section\"], [1, \"form-row\"], [\"appearance\", \"outline\", 1, \"form-field\"], [\"matInput\", \"\", \"formControlName\", \"numero\", \"placeholder\", \"CTR-2024-001\"], [\"matSuffix\", \"\", \"matTooltip\", \"Identificador \\u00FAnico do contrato\"], [\"formControlName\", \"status\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"appearance\", \"outline\", 1, \"form-field-full\"], [\"matInput\", \"\", \"formControlName\", \"cliente\", \"placeholder\", \"Nome da empresa cliente\"], [\"matSuffix\", \"\", \"matTooltip\", \"Nome ou raz\\u00E3o social do cliente\"], [\"matInput\", \"\", \"formControlName\", \"descricao\", \"rows\", \"3\", \"placeholder\", \"Descreva o objeto do contrato e principais obriga\\u00E7\\u00F5es\"], [\"matInput\", \"\", \"formControlName\", \"dataInicio\", 3, \"matDatepicker\"], [\"matSuffix\", \"\", 3, \"for\"], [\"matInput\", \"\", \"formControlName\", \"dataFim\", 3, \"matDatepicker\"], [\"matInput\", \"\", \"type\", \"number\", \"formControlName\", \"valor\", \"placeholder\", \"0.00\"], [\"matPrefix\", \"\"], [\"matSuffix\", \"\", \"matTooltip\", \"Pre\\u00E7o de transa\\u00E7\\u00E3o total do contrato\"], [\"formControlName\", \"moeda\"], [\"value\", \"BRL\"], [\"value\", \"USD\"], [\"value\", \"EUR\"], [1, \"po-count\"], [\"class\", \"validation-alert warn\", 4, \"ngIf\"], [\"formArrayName\", \"performanceObligations\"], [\"class\", \"po-item\", 3, \"formGroupName\", 4, \"ngFor\", \"ngForOf\"], [1, \"po-actions\"], [\"type\", \"button\", \"mat-stroked-button\", \"\", 3, \"click\"], [\"matInput\", \"\", \"formControlName\", \"observacoes\", \"rows\", \"4\", \"placeholder\", \"Informa\\u00E7\\u00F5es adicionais, considera\\u00E7\\u00F5es especiais, etc.\"], [1, \"form-actions\"], [\"type\", \"button\", \"mat-button\", \"\", 3, \"click\", \"disabled\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"disabled\"], [4, \"ngIf\"], [3, \"value\"], [1, \"validation-alert\", \"warn\"], [1, \"alert-content\"], [1, \"po-item\", 3, \"formGroupName\"], [1, \"po-header\"], [\"type\", \"button\", \"mat-icon-button\", \"\", \"color\", \"warn\", \"matTooltip\", \"Remover PO\", 3, \"click\", \"disabled\"], [1, \"po-content\"], [\"matInput\", \"\", \"formControlName\", \"descricao\", \"placeholder\", \"Ex: Licen\\u00E7a de software, Implementa\\u00E7\\u00E3o, Suporte\"], [\"formControlName\", \"metodoReconhecimento\"], [\"matSuffix\", \"\", \"matTooltip\", \"Conforme IFRS 15 - crit\\u00E9rios de transfer\\u00EAncia de controle\"], [\"class\", \"form-row\", 4, \"ngIf\"], [\"matInput\", \"\", \"type\", \"number\", \"formControlName\", \"progresso\", \"min\", \"0\", \"max\", \"100\"], [\"matSuffix\", \"\"], [1, \"progress-visual\"], [\"mode\", \"determinate\", 3, \"value\"], [1, \"progress-label\"]],\n        template: function ContractFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"div\", 4)(1, \"form\", 5);\n            i0.ɵɵlistener(\"ngSubmit\", function ContractFormComponent_Template_form_ngSubmit_1_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.onSubmit());\n            });\n            i0.ɵɵelementStart(2, \"div\", 6)(3, \"h2\", 7)(4, \"mat-icon\");\n            i0.ɵɵtext(5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"p\", 8);\n            i0.ɵɵtext(8);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(9, \"mat-dialog-content\", 9)(10, \"mat-card\", 10)(11, \"mat-card-header\")(12, \"mat-card-title\");\n            i0.ɵɵtext(13, \"Informa\\u00E7\\u00F5es B\\u00E1sicas\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(14, \"mat-card-content\")(15, \"div\", 11)(16, \"mat-form-field\", 12)(17, \"mat-label\");\n            i0.ɵɵtext(18, \"N\\u00FAmero do Contrato\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(19, \"input\", 13);\n            i0.ɵɵelementStart(20, \"mat-icon\", 14);\n            i0.ɵɵtext(21, \"info\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"mat-error\");\n            i0.ɵɵtext(23);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(24, \"mat-form-field\", 12)(25, \"mat-label\");\n            i0.ɵɵtext(26, \"Status\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"mat-select\", 15);\n            i0.ɵɵtemplate(28, ContractFormComponent_mat_option_28_Template, 2, 2, \"mat-option\", 16);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(29, \"mat-error\");\n            i0.ɵɵtext(30);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(31, \"div\", 11)(32, \"mat-form-field\", 17)(33, \"mat-label\");\n            i0.ɵɵtext(34, \"Cliente\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(35, \"input\", 18);\n            i0.ɵɵelementStart(36, \"mat-icon\", 19);\n            i0.ɵɵtext(37, \"business\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(38, \"mat-error\");\n            i0.ɵɵtext(39);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(40, \"div\", 11)(41, \"mat-form-field\", 17)(42, \"mat-label\");\n            i0.ɵɵtext(43, \"Descri\\u00E7\\u00E3o do Contrato\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(44, \"textarea\", 20);\n            i0.ɵɵelementStart(45, \"mat-error\");\n            i0.ɵɵtext(46);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(47, \"div\", 11)(48, \"mat-form-field\", 12)(49, \"mat-label\");\n            i0.ɵɵtext(50, \"Data de In\\u00EDcio\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(51, \"input\", 21)(52, \"mat-datepicker-toggle\", 22)(53, \"mat-datepicker\", null, 0);\n            i0.ɵɵelementStart(55, \"mat-error\");\n            i0.ɵɵtext(56);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(57, \"mat-form-field\", 12)(58, \"mat-label\");\n            i0.ɵɵtext(59, \"Data de Fim\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(60, \"input\", 23)(61, \"mat-datepicker-toggle\", 22)(62, \"mat-datepicker\", null, 1);\n            i0.ɵɵelementStart(64, \"mat-error\");\n            i0.ɵɵtext(65);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(66, \"div\", 11)(67, \"mat-form-field\", 12)(68, \"mat-label\");\n            i0.ɵɵtext(69, \"Valor Total\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(70, \"input\", 24);\n            i0.ɵɵelementStart(71, \"span\", 25);\n            i0.ɵɵtext(72, \"R$ \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(73, \"mat-icon\", 26);\n            i0.ɵɵtext(74, \"monetization_on\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(75, \"mat-error\");\n            i0.ɵɵtext(76);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(77, \"mat-form-field\", 12)(78, \"mat-label\");\n            i0.ɵɵtext(79, \"Moeda\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(80, \"mat-select\", 27)(81, \"mat-option\", 28);\n            i0.ɵɵtext(82, \"Real (BRL)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(83, \"mat-option\", 29);\n            i0.ɵɵtext(84, \"D\\u00F3lar (USD)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(85, \"mat-option\", 30);\n            i0.ɵɵtext(86, \"Euro (EUR)\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(87, \"mat-error\");\n            i0.ɵɵtext(88);\n            i0.ɵɵelementEnd()()()()();\n            i0.ɵɵelementStart(89, \"mat-card\", 10)(90, \"mat-card-header\")(91, \"mat-card-title\");\n            i0.ɵɵtext(92, \" Performance Obligations \");\n            i0.ɵɵelementStart(93, \"mat-chip\", 31);\n            i0.ɵɵtext(94);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(95, \"mat-card-subtitle\");\n            i0.ɵɵtext(96, \" Identifique as obriga\\u00E7\\u00F5es de performance distintas do contrato \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(97, \"mat-card-content\");\n            i0.ɵɵtemplate(98, ContractFormComponent_mat_card_98_Template, 12, 12, \"mat-card\", 32);\n            i0.ɵɵelementStart(99, \"div\", 33);\n            i0.ɵɵtemplate(100, ContractFormComponent_div_100_Template, 53, 14, \"div\", 34);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(101, \"div\", 35)(102, \"button\", 36);\n            i0.ɵɵlistener(\"click\", function ContractFormComponent_Template_button_click_102_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.addPerformanceObligation());\n            });\n            i0.ɵɵelementStart(103, \"mat-icon\");\n            i0.ɵɵtext(104, \"add\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(105, \" Adicionar Performance Obligation \");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(106, \"mat-card\", 10)(107, \"mat-card-header\")(108, \"mat-card-title\");\n            i0.ɵɵtext(109, \"Informa\\u00E7\\u00F5es Adicionais\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(110, \"mat-card-content\")(111, \"mat-form-field\", 17)(112, \"mat-label\");\n            i0.ɵɵtext(113, \"Observa\\u00E7\\u00F5es\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(114, \"textarea\", 37);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(115, \"mat-dialog-actions\", 38)(116, \"button\", 39);\n            i0.ɵɵlistener(\"click\", function ContractFormComponent_Template_button_click_116_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.onCancel());\n            });\n            i0.ɵɵtext(117, \" Cancelar \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(118, \"button\", 40);\n            i0.ɵɵtemplate(119, ContractFormComponent_mat_icon_119_Template, 2, 0, \"mat-icon\", 41)(120, ContractFormComponent_mat_icon_120_Template, 2, 1, \"mat-icon\", 41);\n            i0.ɵɵtext(121);\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            const startPicker_r10 = i0.ɵɵreference(54);\n            const endPicker_r11 = i0.ɵɵreference(63);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"formGroup\", ctx.contractForm);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtextInterpolate(ctx.isEditMode ? \"edit\" : \"add\");\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.isEditMode ? \"Editar Contrato\" : \"Novo Contrato\", \" \");\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate1(\" \", ctx.isEditMode ? \"Atualize as informa\\u00E7\\u00F5es do contrato\" : \"Preencha os dados para criar um novo contrato IFRS 15\", \" \");\n            i0.ɵɵadvance(15);\n            i0.ɵɵtextInterpolate(ctx.getErrorMessage(\"numero\"));\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngForOf\", ctx.statusOptions);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.getErrorMessage(\"status\"));\n            i0.ɵɵadvance(9);\n            i0.ɵɵtextInterpolate(ctx.getErrorMessage(\"cliente\"));\n            i0.ɵɵadvance(7);\n            i0.ɵɵtextInterpolate(ctx.getErrorMessage(\"descricao\"));\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"matDatepicker\", startPicker_r10);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"for\", startPicker_r10);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtextInterpolate(ctx.getErrorMessage(\"dataInicio\"));\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"matDatepicker\", endPicker_r11);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"for\", endPicker_r11);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtextInterpolate(ctx.getErrorMessage(\"dataFim\"));\n            i0.ɵɵadvance(11);\n            i0.ɵɵtextInterpolate(ctx.getErrorMessage(\"valor\"));\n            i0.ɵɵadvance(12);\n            i0.ɵɵtextInterpolate(ctx.getErrorMessage(\"moeda\"));\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate(ctx.performanceObligations.length);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.isValueMismatch());\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.performanceObligations.controls);\n            i0.ɵɵadvance(16);\n            i0.ɵɵproperty(\"disabled\", ctx.loading);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.loading || ctx.contractForm.invalid);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.loading ? \"Salvando...\" : ctx.isEditMode ? \"Atualizar\" : \"Criar Contrato\", \" \");\n          }\n        },\n        dependencies: [CommonModule, i4.NgForOf, i4.NgIf, i4.CurrencyPipe, ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MinValidator, i1.MaxValidator, i1.FormGroupDirective, i1.FormControlName, i1.FormGroupName, i1.FormArrayName, MatDialogModule, i5.MatDialogTitle, i5.MatDialogActions, i5.MatDialogContent, MatFormFieldModule, i6.MatFormField, i6.MatLabel, i6.MatError, i6.MatPrefix, i6.MatSuffix, MatInputModule, i7.MatInput, MatSelectModule, i8.MatSelect, i9.MatOption, MatButtonModule, i10.MatButton, i10.MatIconButton, MatIconModule, i11.MatIcon, MatCardModule, i12.MatCard, i12.MatCardContent, i12.MatCardHeader, i12.MatCardSubtitle, i12.MatCardTitle, MatDatepickerModule, i13.MatDatepicker, i13.MatDatepickerInput, i13.MatDatepickerToggle, MatNativeDateModule, MatTooltipModule, i14.MatTooltip, MatDividerModule, MatChipsModule, i15.MatChip],\n        styles: [\".contract-form-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.form-header[_ngcontent-%COMP%]{padding:24px 24px 0;border-bottom:1px solid #e0e0e0;margin-bottom:24px}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0 0 8px;font-weight:500}.form-header[_ngcontent-%COMP%]   .form-subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:14px}.form-content[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto;padding:0 24px}.form-section[_ngcontent-%COMP%]{margin-bottom:24px}.form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:16px}.form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:18px}.form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{color:#666;font-size:14px;margin-top:4px}.form-section[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-top:0}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}.form-field[_ngcontent-%COMP%]{flex:1}.form-field.form-field-full[_ngcontent-%COMP%]{width:100%}.po-count[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff;font-size:12px;height:24px;line-height:24px}.validation-alert[_ngcontent-%COMP%]{margin-bottom:16px}.validation-alert.warn[_ngcontent-%COMP%]{background-color:#fff3cd;border-left:4px solid #ffc107}.validation-alert[_ngcontent-%COMP%]   .alert-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px}.validation-alert[_ngcontent-%COMP%]   .alert-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9800;margin-top:2px}.validation-alert[_ngcontent-%COMP%]   .alert-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:4px}.validation-alert[_ngcontent-%COMP%]   .alert-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#666}.po-item[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;margin-bottom:16px;overflow:hidden}.po-item[_ngcontent-%COMP%]   .po-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#f5f5f5;padding:12px 16px;border-bottom:1px solid #e0e0e0}.po-item[_ngcontent-%COMP%]   .po-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-weight:500;color:#333}.po-item[_ngcontent-%COMP%]   .po-content[_ngcontent-%COMP%]{padding:16px}.progress-visual[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;gap:8px}.progress-visual[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{height:8px;border-radius:4px}.progress-visual[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-align:center}.po-actions[_ngcontent-%COMP%]{text-align:center;padding:16px 0;border-top:1px solid #e0e0e0;margin-top:16px}.form-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e0e0e0;display:flex;justify-content:flex-end;gap:12px}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]   .mat-form-field-suffix[_ngcontent-%COMP%]{display:flex;align-items:center}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{color:#ddd}.mat-form-field-appearance-outline.mat-focused[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%]{color:#2196f3}.mat-form-field-appearance-outline.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%]{color:#f44336}@media (max-width: 768px){.contract-form-container[_ngcontent-%COMP%]{max-width:100%}.form-header[_ngcontent-%COMP%], .form-content[_ngcontent-%COMP%], .form-actions[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.po-item[_ngcontent-%COMP%]   .po-content[_ngcontent-%COMP%]{padding:12px}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.loading-overlay[_ngcontent-%COMP%]{position:relative}.loading-overlay[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;inset:0;background:#fffc;z-index:10;display:flex;align-items:center;justify-content:center}.mat-icon[matTooltip][_ngcontent-%COMP%]{cursor:help;color:#666}.mat-icon[matTooltip][_ngcontent-%COMP%]:hover{color:#2196f3}.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%]{color:#f44336}.mat-error[_ngcontent-%COMP%]{font-size:12px;margin-top:4px}\"]\n      });\n    }\n  }\n  return ContractFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}