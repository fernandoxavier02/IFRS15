{"ast":null,"code":"import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { throwError } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { environment } from '../../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let ApiService = /*#__PURE__*/(() => {\n  class ApiService {\n    constructor(http) {\n      this.http = http;\n      this.baseUrl = environment.apiUrl;\n    }\n    getHeaders() {\n      const token = localStorage.getItem('access_token');\n      return new HttpHeaders({\n        'Content-Type': 'application/json',\n        ...(token && {\n          'Authorization': `Bearer ${token}`\n        })\n      });\n    }\n    // Generic CRUD operations\n    get(endpoint, params) {\n      let httpParams = new HttpParams();\n      if (params) {\n        Object.keys(params).forEach(key => {\n          if (params[key] !== null && params[key] !== undefined) {\n            httpParams = httpParams.set(key, params[key].toString());\n          }\n        });\n      }\n      return this.http.get(`${this.baseUrl}/${endpoint}`, {\n        headers: this.getHeaders(),\n        params: httpParams\n      }).pipe(map(response => response.data), catchError(this.handleError));\n    }\n    post(endpoint, data) {\n      return this.http.post(`${this.baseUrl}/${endpoint}`, data, {\n        headers: this.getHeaders()\n      }).pipe(map(response => response.data), catchError(this.handleError));\n    }\n    put(endpoint, data) {\n      return this.http.put(`${this.baseUrl}/${endpoint}`, data, {\n        headers: this.getHeaders()\n      }).pipe(map(response => response.data), catchError(this.handleError));\n    }\n    delete(endpoint) {\n      return this.http.delete(`${this.baseUrl}/${endpoint}`, {\n        headers: this.getHeaders()\n      }).pipe(map(response => response.data), catchError(this.handleError));\n    }\n    // Paginated requests\n    getPaginated(endpoint, page = 1, limit = 10, filters) {\n      const params = {\n        page: page.toString(),\n        limit: limit.toString(),\n        ...filters\n      };\n      return this.get(endpoint, params);\n    }\n    handleError(error) {\n      let errorMessage = 'An error occurred';\n      if (error.error?.message) {\n        errorMessage = error.error.message;\n      } else if (error.error?.errors) {\n        errorMessage = error.error.errors.join(', ');\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      console.error('API Error:', error);\n      return throwError(() => new Error(errorMessage));\n    }\n    static {\n      this.ɵfac = function ApiService_Factory(t) {\n        return new (t || ApiService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: ApiService,\n        factory: ApiService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ApiService;\n})();\n// Specific API services\nexport let ContractsApiService = /*#__PURE__*/(() => {\n  class ContractsApiService {\n    constructor(api) {\n      this.api = api;\n    }\n    getContracts(page, limit, filters) {\n      return this.api.getPaginated('contratos', page, limit, filters);\n    }\n    getContract(id) {\n      return this.api.get(`contratos/${id}`);\n    }\n    createContract(contract) {\n      return this.api.post('contratos', contract);\n    }\n    updateContract(id, contract) {\n      return this.api.put(`contratos/${id}`, contract);\n    }\n    deleteContract(id) {\n      return this.api.delete(`contratos/${id}`);\n    }\n    evaluateContract(id) {\n      return this.api.post(`contratos/${id}/avaliar`, {});\n    }\n    getRevenueSchedule(id) {\n      return this.api.get(`contratos/${id}/agenda`);\n    }\n    modifyContract(id, modification) {\n      return this.api.post(`contratos/${id}/modificar`, modification);\n    }\n    static {\n      this.ɵfac = function ContractsApiService_Factory(t) {\n        return new (t || ContractsApiService)(i0.ɵɵinject(ApiService));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: ContractsApiService,\n        factory: ContractsApiService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ContractsApiService;\n})();\nexport let DACApiService = /*#__PURE__*/(() => {\n  class DACApiService {\n    constructor(api) {\n      this.api = api;\n    }\n    getDACList(page, limit) {\n      return this.api.getPaginated('dac', page, limit);\n    }\n    registerDAC(dac) {\n      return this.api.post('dac', dac);\n    }\n    getAmortizationSchedule(id) {\n      return this.api.get(`dac/${id}/agenda`);\n    }\n    performImpairmentTest(id, testData) {\n      return this.api.post(`dac/${id}/teste-impairment`, testData);\n    }\n    getDACStatus(id) {\n      return this.api.get(`dac/${id}/status`);\n    }\n    reestimateDAC(id, reestimateData) {\n      return this.api.post(`dac/${id}/reestimate`, reestimateData);\n    }\n    static {\n      this.ɵfac = function DACApiService_Factory(t) {\n        return new (t || DACApiService)(i0.ɵɵinject(ApiService));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: DACApiService,\n        factory: DACApiService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return DACApiService;\n})();\nexport let PoliciesApiService = /*#__PURE__*/(() => {\n  class PoliciesApiService {\n    constructor(api) {\n      this.api = api;\n    }\n    getPolicies(page, limit) {\n      return this.api.getPaginated('policies', page, limit);\n    }\n    getPolicy(id) {\n      return this.api.get(`policies/${id}`);\n    }\n    createPolicy(policy) {\n      return this.api.post('policies', policy);\n    }\n    updatePolicy(id, policy) {\n      return this.api.put(`policies/${id}`, policy);\n    }\n    getPolicySnapshots(contractId) {\n      return this.api.get(`policies/snapshots/${contractId}`);\n    }\n    restoreSnapshot(contractId, version) {\n      return this.api.post(`policies/snapshots/${contractId}/restore`, {\n        version\n      });\n    }\n    static {\n      this.ɵfac = function PoliciesApiService_Factory(t) {\n        return new (t || PoliciesApiService)(i0.ɵɵinject(ApiService));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: PoliciesApiService,\n        factory: PoliciesApiService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return PoliciesApiService;\n})();\nexport let ClientsApiService = /*#__PURE__*/(() => {\n  class ClientsApiService {\n    constructor(api) {\n      this.api = api;\n    }\n    getClients(page, limit, filters) {\n      return this.api.getPaginated('clients', page, limit, filters);\n    }\n    getClient(id) {\n      return this.api.get(`clients/${id}`);\n    }\n    createClient(client) {\n      return this.api.post('clients', client);\n    }\n    updateClient(id, client) {\n      return this.api.put(`clients/${id}`, client);\n    }\n    deleteClient(id) {\n      return this.api.delete(`clients/${id}`);\n    }\n    exportClients() {\n      return this.api.http.get(`${this.api['baseUrl']}/clients/export`, {\n        headers: this.api['getHeaders'](),\n        responseType: 'blob'\n      });\n    }\n    static {\n      this.ɵfac = function ClientsApiService_Factory(t) {\n        return new (t || ClientsApiService)(i0.ɵɵinject(ApiService));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: ClientsApiService,\n        factory: ClientsApiService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ClientsApiService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}